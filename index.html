<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Distribution Service</title>
    <link rel="stylesheet" href="styles.css">
    <!-- لینک به کتابخانه Uploadcare -->
    <script src="https://ucarecdn.com/libs/widget/3.x/uploadcare.full.min.js" charset="utf-8"></script>
    
    <!-- تنظیم API Key -->
    <script>
        UPLOADCARE_PUBLIC_KEY = "a7b9d76091952310f787";  <!-- Public Key -->
    </script>
    
    <style>
        /* استایل برای جدا کردن بخش‌ها و نمایش درصد آپلود */
        .upload-section {
            margin-bottom: 40px;
        }

        .progress-bar-container {
            margin-top: 10px;
            height: 20px;
            background-color: #333;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            background-color: #4caf50;
            height: 100%;
            width: 0;
            transition: width 0.3s ease;
        }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            color: white;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <header>
        <h1>Music Distribution Service</h1>
        <p>Please fill in the required information and upload your files</p>
    </header>

    <main>
        <!-- شروع فرم -->
        <form name="music-distribution" method="POST" action="/success.html" enctype="multipart/form-data" data-netlify="true">
            <input type="hidden" name="form-name" value="music-distribution">
            
            <section>
                <h2>Artist Information</h2>
                <label for="artist-name">Artist Name:</label>
                <input type="text" id="artist-name" name="artist-name" required>

                <label for="legal-name">Legal Name:</label>
                <input type="text" id="legal-name" name="legal-name" required>

                <label for="dob">Date of Birth (YYYY-MM-DD):</label>
                <input type="date" id="dob" name="dob" required>

                <label for="spotify">Spotify Link:</label>
                <input type="url" id="spotify" name="spotify">

                <label for="apple-music">Apple Music Link:</label>
                <input type="url" id="apple-music" name="apple-music">
            </section>

            <section>
                <h2>Music Information</h2>
                <label for="track-name">Track Name:</label>
                <input type="text" id="track-name" name="track-name" required>

                <label for="producer-name">Producer Name:</label>
                <input type="text" id="producer-name" name="producer-name">

                <label for="mixing-engineer">Mixing Engineer:</label>
                <input type="text" id="mixing-engineer" name="mixing-engineer">

                <label for="mastering-engineer">Mastering Engineer:</label>
                <input type="text" id="mastering-engineer" name="mastering-engineer">

                <label for="composer-name">Composer Name (Artist's Full Legal Name):</label>
                <input type="text" id="composer-name" name="composer-name" required>
            </section>

            <!-- بخش آپلود کاور -->
            <section class="upload-section">
                <h2>Upload Cover Image</h2>
                <label for="cover-art">Upload Cover Image (JPG 3000x3000):</label>
                <input type="hidden" role="uploadcare-uploader" id="cover-art" name="cover-art" data-crop="3000x3000" required>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="cover-progress-bar"></div>
                    <div class="progress-text" id="cover-progress-text">0%</div>
                </div>
            </section>

            <!-- بخش آپلود فایل WAV -->
            <section class="upload-section">
                <h2>Upload WAV File</h2>
                <label for="music-track">Upload WAV File:</label>
                <input type="hidden" role="uploadcare-uploader" id="music-track" name="music-track" accept=".wav" required>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="wav-progress-bar"></div>
                    <div class="progress-text" id="wav-progress-text">0%</div>
                </div>
            </section>

            <button type="submit">Submit</button>
        </form>
        <!-- پایان فرم -->
    </main>

    <script>
        // برای کاور درصد آپلود را ردیابی کن
        var coverUploader = uploadcare.Widget('[role=uploadcare-uploader]#cover-art');
        coverUploader.onUploadProgress(function(info) {
            var percent = Math.round(info.progress * 100);
            document.getElementById('cover-progress-bar').style.width = percent + '%';
            document.getElementById('cover-progress-text').textContent = percent + '%';
        });

        // برای فایل WAV درصد آپلود را ردیابی کن
        var wavUploader = uploadcare.Widget('[role=uploadcare-uploader]#music-track');
        wavUploader.onUploadProgress(function(info) {
            var percent = Math.round(info.progress * 100);
            document.getElementById('wav-progress-bar').style.width = percent + '%';
            document.getElementById('wav-progress-text').textContent = percent + '%';
        });
    </script>

</body>
</html>
